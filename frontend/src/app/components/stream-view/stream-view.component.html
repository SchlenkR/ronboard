<div class="message-area" #messageArea>
  @for (msg of sessionService.messages(); track msg.index) {
    <app-message-renderer [message]="msg" />
  }

  @if (sessionService.messages().length === 0 && !isActive()) {
    <div class="waiting">Waiting for Claude...</div>
  }

  @if (isActive()) {
    <div class="typing-indicator">
      <span class="typing-label">{{ activityLabel() }}</span>
      <span class="typing-dots">
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
      </span>
    </div>
  }
</div>

<div class="input-area">
  <textarea #input
            class="message-input"
            placeholder="Send a message... (Enter to send, Shift+Enter for newline)"
            (keydown)="onKeydown($event, input)"
            (input)="autoResize(input)"
            [disabled]="sessionService.activeSession()?.status !== 'running'"
            rows="1"></textarea>
  <button class="btn-send"
          (click)="send(input)"
          [disabled]="sessionService.activeSession()?.status !== 'running'">Send</button>
</div>
