@if (sessionService.activeSession(); as session) {
  <div class="session-header">
    <div class="header-info">
      <h3>{{ session.name }}</h3>
      <span class="badge" [ngClass]="session.status">{{ session.status }}</span>
      @if (activityState() === 'busy') {
        <span class="activity-badge thinking">Thinking...</span>
      } @else if (activityState() === 'tool_use') {
        <span class="activity-badge tool-use">Tool running...</span>
      }
      <span class="mode-badge" [ngClass]="session.mode">{{ session.mode }}</span>
      <span class="working-dir">{{ session.workingDirectory }}</span>
    </div>
    <button class="btn-stop" (click)="stop()" [disabled]="session.status === 'stopped'">Stop</button>
  </div>
}

<!-- Terminal always in DOM (xterm.js needs a persistent container) -->
<app-terminal-view class="view-area"
    [style.display]="sessionService.activeSession()?.mode === 'terminal' ? '' : 'none'" />

<!-- Stream can be dynamic since it reads from the messages signal -->
@if (sessionService.activeSession()?.mode === 'stream') {
  <app-stream-view class="view-area" />
}

@if (!sessionService.activeSession()) {
  <div class="empty-state">
    <div class="empty-icon">&#9881;</div>
    <h3>Ronboard</h3>
    <p>Select or create a session to get started.</p>
  </div>
}
